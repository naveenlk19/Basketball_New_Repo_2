{"file_path": "Source/BasketBallGame/Variant_Combat/Gameplay/CombatActivationVolume.cpp", "file_id": "Source_BasketBallGame_Variant_Combat_Gameplay_CombatActivationVolume_cpp", "asset_path": "", "doc_id": "qq-32a2e7f5-7a2f-44d3-86e3-6fb9b72ebe65", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n\n#include \"CombatActivationVolume.h\"\n#include \"Components/BoxComponent.h\"\n#include \"GameFramework/Character.h\"\n#include \"CombatActivatable.h\"\n\nACombatActivationVolume::ACombatActivationVolume()\n{\n\tPrimaryActorTick.bCanEverTick = false;\n\n\t// create the box volume\n\tRootComponent = Box = CreateDefaultSubobject<UBoxComponent>(TEXT(\"Box\"));\n\tcheck(Box);\n\n\t// set the box's extent\n\tBox->SetBoxExtent(FVector(500.0f, 500.0f, 500.0f));\n\n\t// set the default collision profile to overlap all dynamic\n\tBox->SetCollisionProfileName(FName(\"OverlapAllDynamic\"));\n\n\t// bind the begin overlap \n\tBox->OnComponentBeginOverlap.AddDynamic(this, &ACombatActivationVolume::OnOverlap);\n}\n\nvoid ACombatActivationVolume::OnOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult)\n{\n\t// has a Character entered the volume?\n\tACharacter* PlayerCharacter = Cast<ACharacter>(OtherActor);\n\n\tif (PlayerCharacter)\n\t{\n\t\t// is the Character controlled by a player\n\t\tif (PlayerCharacter->IsPlayerControlled())\n\t\t{\n\t\t\t// process the actors to activate list\n\t\t\tfor (AActor* CurrentActor : ActorsToActivate)\n\t\t\t{\n\t\t\t\t// is the referenced actor activatable?\n\t\t\t\tif(ICombatActivatable* Activatable = Cast<ICombatActivatable>(CurrentActor))\n\t\t\t\t{\n\t\t\t\t\tActivatable->ActivateInteraction(PlayerCharacter);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}"}