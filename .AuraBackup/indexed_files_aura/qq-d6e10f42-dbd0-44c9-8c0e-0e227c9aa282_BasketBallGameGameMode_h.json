{"file_path": "Source/BasketBallGame/BasketBallGameGameMode.h", "file_id": "Source_BasketBallGame_BasketBallGameGameMode_h", "asset_path": "", "doc_id": "qq-d6e10f42-dbd0-44c9-8c0e-0e227c9aa282", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n#pragma once\n\n#include \"CoreMinimal.h\"\n#include \"GameFramework/GameModeBase.h\"\n#include \"BasketBallGameGameMode.generated.h\"\n\nclass UBasketballScoreManager;\nclass UUserWidget;\nclass ABasketBallGameState;\n\n/** Delegate for match timer updates (broadcasts remaining time in seconds) */\nDECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnMatchTimerUpdated, int32, RemainingSeconds);\n\n/** Delegate for shot attempt updates */\nDECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnShotAttemptUpdated, int32, TotalAttempts);\n\n/** Delegate for match start */\nDECLARE_DYNAMIC_MULTICAST_DELEGATE(FOnMatchStarted);\n\n/** Delegate for match end */\nDECLARE_DYNAMIC_MULTICAST_DELEGATE(FOnMatchEnded);\n\n/**\n *  Basketball Game Mode\n *  Manages scoring, round timer, and game state\n */\nUCLASS(abstract)\nclass ABasketBallGameGameMode : public AGameModeBase\n{\n\tGENERATED_BODY()\n\npublic:\n\t\n\t/** Constructor */\n\tABasketBallGameGameMode();\n\n\tvirtual void BeginPlay() override;\n\n\t// ======== Match Timer System ========\n\n\t/** Duration of match in seconds (default: 300 = 5 minutes) */\n\tUPROPERTY(EditDefaultsOnly, BlueprintReadOnly, Category = \"Match Timer\", meta = (ClampMin = \"1\", ClampMax = \"3600\"))\n\tint32 MatchDurationSeconds;\n\n\t/** Start the match timer */\n\tUFUNCTION(BlueprintCallable, Category = \"Match Timer\")\n\tvoid StartMatch();\n\n\t/** Pause the match timer */\n\tUFUNCTION(BlueprintCallable, Category = \"Match Timer\")\n\tvoid PauseMatch();\n\n\t/** Resume the match timer */\n\tUFUNCTION(BlueprintCallable, Category = \"Match Timer\")\n\tvoid ResumeMatch();\n\n\t/** Called when match timer reaches zero */\n\tUFUNCTION(BlueprintCallable, Category = \"Match Timer\")\n\tvoid EndMatch();\n\n\t/** Delegate broadcast when timer updates (every second) */\n\tUPROPERTY(BlueprintAssignable, Category = \"Match Timer\")\n\tFOnMatchTimerUpdated OnMatchTimerUpdated;\n\n\t/** Delegate broadcast when match starts */\n\tUPROPERTY(BlueprintAssignable, Category = \"Match Timer\")\n\tFOnMatchStarted OnMatchStarted;\n\n\t/** Delegate broadcast when match ends */\n\tUPROPERTY(BlueprintAssignable, Category = \"Match Timer\")\n\tFOnMatchEnded OnMatchEnded;\n\n\t// ======== Shot Attempt System ========\n\n\t/** Register a shot attempt (increments counter and broadcasts) */\n\tUFUNCTION(BlueprintCallable, Category = \"Shot Attempts\")\n\tvoid RegisterShotAttempt();\n\n\t/** Delegate broadcast when shot attempt is registered */\n\tUPROPERTY(BlueprintAssignable, Category = \"Shot Attempts\")\n\tFOnShotAttemptUpdated OnShotAttemptUpdated;\n\n\t// ======== Helper Functions ========\n\n\t/** Helper to update HUD widget with timer (Blueprint-callable) */\n\tUFUNCTION(BlueprintCallable, Category = \"Match Timer\")\n\tvoid UpdateHUDTimer(UUserWidget* HUDWidget, int32 Seconds);\n\n\t/** Score manager component */\n\tUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = \"Components\", meta = (AllowPrivateAccess = \"true\"))\n\tUBasketballScoreManager* ScoreManager;\n\n\t/** Returns ScoreManager subobject */\n\tFORCEINLINE UBasketballScoreManager* GetScoreManager() const { return ScoreManager; }\n\n\t/** Get Basketball Game State (typed accessor) */\n\tABasketBallGameState* GetBasketBallGameState() const;\n\nprotected:\n\t/** Timer handle for match countdown */\n\tFTimerHandle MatchTimerHandle;\n\n\t/** Called every second to update match timer */\n\tvoid UpdateMatchTimer();\n};\n"}