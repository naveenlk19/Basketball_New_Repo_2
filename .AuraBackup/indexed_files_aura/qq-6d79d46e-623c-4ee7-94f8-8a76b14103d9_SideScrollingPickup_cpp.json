{"file_path": "Source/BasketBallGame/Variant_SideScrolling/Gameplay/SideScrollingPickup.cpp", "file_id": "Source_BasketBallGame_Variant_SideScrolling_Gameplay_SideScrollingPickup_cpp", "asset_path": "", "doc_id": "qq-6d79d46e-623c-4ee7-94f8-8a76b14103d9", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n\n#include \"SideScrollingPickup.h\"\n#include \"GameFramework/Character.h\"\n#include \"SideScrollingGameMode.h\"\n#include \"Components/SphereComponent.h\"\n#include \"Components/SceneComponent.h\"\n#include \"Engine/World.h\"\n\nASideScrollingPickup::ASideScrollingPickup()\n{\n\tPrimaryActorTick.bCanEverTick = false;\n\n\t// create the root comp\n\tRootComponent = CreateDefaultSubobject<USceneComponent>(TEXT(\"Root\"));\n\n\t// create the bounding sphere\n\tSphere = CreateDefaultSubobject<USphereComponent>(TEXT(\"Collision\"));\n\tSphere->SetupAttachment(RootComponent);\n\n\tSphere->SetSphereRadius(100.0f);\n\n\tSphere->SetCollisionObjectType(ECC_WorldDynamic);\n\tSphere->SetCollisionEnabled(ECollisionEnabled::QueryOnly);\n\tSphere->SetCollisionResponseToAllChannels(ECR_Ignore);\n\tSphere->SetCollisionResponseToChannel(ECC_Pawn, ECR_Overlap);\n\n\t// add the overlap handler\n\tOnActorBeginOverlap.AddDynamic(this, &ASideScrollingPickup::BeginOverlap);\n}\n\nvoid ASideScrollingPickup::BeginOverlap(AActor* OverlappedActor, AActor* OtherActor)\n{\n\t// have we collided against a character?\n\tif (ACharacter* OverlappedCharacter = Cast<ACharacter>(OtherActor))\n\t{\n\t\t// is this the player character?\n\t\tif (OverlappedCharacter->IsPlayerControlled())\n\t\t{\n\t\t\t// get the game mode\n\t\t\tif (ASideScrollingGameMode* GM = Cast<ASideScrollingGameMode>(GetWorld()->GetAuthGameMode()))\n\t\t\t{\n\t\t\t\t// tell the game mode to process a pickup\n\t\t\t\tGM->ProcessPickup();\n\n\t\t\t\t// disable collision so we don't get picked up again\n\t\t\t\tSetActorEnableCollision(false);\n\n\t\t\t\t// Call the BP handler. It will be responsible for destroying the pickup\n\t\t\t\tBP_OnPickedUp();\n\t\t\t}\n\t\t}\n\t}\n}"}