{"file_path": "Source/BasketBallGame/Variant_SideScrolling/Gameplay/SideScrollingSoftPlatform.cpp", "file_id": "Source_BasketBallGame_Variant_SideScrolling_Gameplay_SideScrollingSoftPlatform_cpp", "asset_path": "", "doc_id": "qq-6c7ae45c-4ef5-4414-9f3f-943f7a26f549", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n\n#include \"SideScrollingSoftPlatform.h\"\n#include \"Components/SceneComponent.h\"\n#include \"Components/StaticMeshComponent.h\"\n#include \"Components/BoxComponent.h\"\n#include \"SideScrollingCharacter.h\"\n\nASideScrollingSoftPlatform::ASideScrollingSoftPlatform()\n{\n \tPrimaryActorTick.bCanEverTick = true;\n\n\t// create the root component\n\tRootComponent = Root = CreateDefaultSubobject<USceneComponent>(TEXT(\"Root\"));\n\n\t// create the mesh\n\tMesh = CreateDefaultSubobject<UStaticMeshComponent>(TEXT(\"Mesh\"));\n\tMesh->SetupAttachment(Root);\n\n\tMesh->SetCollisionEnabled(ECollisionEnabled::QueryAndPhysics);\n\tMesh->SetCollisionObjectType(ECC_WorldStatic);\n\tMesh->SetCollisionResponseToAllChannels(ECR_Block);\n\n\t// create the collision check box\n\tCollisionCheckBox = CreateDefaultSubobject<UBoxComponent>(TEXT(\"Collision Check Box\"));\n\tCollisionCheckBox->SetupAttachment(Mesh);\n\n\tCollisionCheckBox->SetRelativeLocation(FVector(0.0f, 0.0f, -40.0f));\n\tCollisionCheckBox->SetCollisionEnabled(ECollisionEnabled::QueryOnly);\n\tCollisionCheckBox->SetCollisionObjectType(ECC_WorldDynamic);\n\tCollisionCheckBox->SetCollisionResponseToAllChannels(ECR_Ignore);\n\tCollisionCheckBox->SetCollisionResponseToChannel(ECC_Pawn, ECR_Overlap);\n\n\t// subscribe to the overlap events\n\tCollisionCheckBox->OnComponentBeginOverlap.AddDynamic(this, &ASideScrollingSoftPlatform::OnSoftCollisionOverlap);\n}\n\nvoid ASideScrollingSoftPlatform::OnSoftCollisionOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult)\n{\n\t// have we overlapped a character?\n\tif (ASideScrollingCharacter* Char = Cast<ASideScrollingCharacter>(OtherActor))\n\t{\n\t\t// disable the soft collision channel\n\t\tChar->SetSoftCollision(true);\n\t}\n}\n\nvoid ASideScrollingSoftPlatform::NotifyActorEndOverlap(AActor* OtherActor)\n{\n\tSuper::NotifyActorEndOverlap(OtherActor);\n\n\t// have we overlapped a character?\n\tif (ASideScrollingCharacter* Char = Cast<ASideScrollingCharacter>(OtherActor))\n\t{\n\t\t// enable the soft collision channel\n\t\tChar->SetSoftCollision(false);\n\t}\n}\n"}