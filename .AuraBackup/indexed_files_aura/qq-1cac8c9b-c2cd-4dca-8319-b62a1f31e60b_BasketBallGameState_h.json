{"file_path": "Source/BasketBallGame/BasketBallGameState.h", "file_id": "Source_BasketBallGame_BasketBallGameState_h", "asset_path": "", "doc_id": "qq-1cac8c9b-c2cd-4dca-8319-b62a1f31e60b", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n#pragma once\n\n#include \"CoreMinimal.h\"\n#include \"GameFramework/GameStateBase.h\"\n#include \"BasketBallGameState.generated.h\"\n\n/** Delegate for match timer updates on clients */\nDECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnMatchTimeChanged, int32, NewRemainingSeconds);\n\n/** Delegate for shot attempts updates on clients */\nDECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnAttemptsChanged, int32, NewAttempts);\n\n/**\n * Basketball Game State\n * Holds replicated match state (timer, attempts) for multiplayer\n * Accessible by all clients for UI updates\n */\nUCLASS()\nclass BASKETBALLGAME_API ABasketBallGameState : public AGameStateBase\n{\n\tGENERATED_BODY()\n\npublic:\n\tABasketBallGameState();\n\n\tvirtual void GetLifetimeReplicatedProps(TArray<FLifetimeProperty>& OutLifetimeProps) const override;\n\n\t// ======== Match Timer ========\n\n\t/** Remaining time in match (seconds) - REPLICATED */\n\tUPROPERTY(ReplicatedUsing = OnRep_MatchTimeRemaining, BlueprintReadOnly, Category = \"Match State\")\n\tint32 MatchTimeRemaining;\n\n\t/** Called when MatchTimeRemaining replicates to clients */\n\tUFUNCTION()\n\tvoid OnRep_MatchTimeRemaining();\n\n\t/** Delegate broadcast when timer changes (for UI binding) */\n\tUPROPERTY(BlueprintAssignable, Category = \"Match State\")\n\tFOnMatchTimeChanged OnMatchTimeChanged;\n\n\t// ======== Shot Attempts ========\n\n\t/** Total shot attempts this match - REPLICATED */\n\tUPROPERTY(ReplicatedUsing = OnRep_ShotAttempts, BlueprintReadOnly, Category = \"Match State\")\n\tint32 ShotAttempts;\n\n\t/** Called when ShotAttempts replicates to clients */\n\tUFUNCTION()\n\tvoid OnRep_ShotAttempts();\n\n\t/** Delegate broadcast when attempts change (for UI binding) */\n\tUPROPERTY(BlueprintAssignable, Category = \"Match State\")\n\tFOnAttemptsChanged OnAttemptsChanged;\n\n\t// ======== Match State ========\n\n\t/** Is the match currently active? - REPLICATED */\n\tUPROPERTY(Replicated, BlueprintReadOnly, Category = \"Match State\")\n\tbool bMatchActive;\n\n\t// ======== Server Authority Functions ========\n\n\t/** Set remaining time (server only) */\n\tvoid SetMatchTimeRemaining(int32 NewTime);\n\n\t/** Increment shot attempts (server only) */\n\tvoid IncrementShotAttempts();\n\n\t/** Set match active state (server only) */\n\tvoid SetMatchActive(bool bActive);\n};"}