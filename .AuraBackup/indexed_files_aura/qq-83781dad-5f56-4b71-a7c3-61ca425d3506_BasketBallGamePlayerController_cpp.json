{"file_path": "Source/BasketBallGame/BasketBallGamePlayerController.cpp", "file_id": "Source_BasketBallGame_BasketBallGamePlayerController_cpp", "asset_path": "", "doc_id": "qq-83781dad-5f56-4b71-a7c3-61ca425d3506", "referencers": [], "dependencies": [], "content": "#include \"BasketBallGamePlayerController.h\"\n#include \"EnhancedInputSubsystems.h\"\n#include \"EnhancedInputComponent.h\"\n#include \"Blueprint/UserWidget.h\"\n#include \"GameFramework/Character.h\"\n\nvoid ABasketBallGamePlayerController::BeginPlay()\n{\n\tSuper::BeginPlay();\n\n\t// ===== HUD =====\n\tif (IsLocalController() && ScoreHUDClass)\n\t{\n\t\tScoreHUD = CreateWidget<UUserWidget>(this, ScoreHUDClass);\n\t\tif (ScoreHUD)\n\t\t{\n\t\t\tScoreHUD->AddToViewport();\n\t\t\tUE_LOG(LogTemp, Warning, TEXT(\"PlayerController: HUD Created\"));\n\t\t}\n\t}\n\n\t// ===== INPUT MAPPING =====\n\tif (ULocalPlayer* LocalPlayer = GetLocalPlayer())\n\t{\n\t\tif (UEnhancedInputLocalPlayerSubsystem* Subsystem =\n\t\t\tLocalPlayer->GetSubsystem<UEnhancedInputLocalPlayerSubsystem>())\n\t\t{\n\t\t\tif (DefaultMappingContext)\n\t\t\t{\n\t\t\t\tSubsystem->AddMappingContext(DefaultMappingContext, 0);\n\t\t\t\tUE_LOG(LogTemp, Warning, TEXT(\"Input Mapping Added\"));\n\t\t\t}\n\t\t}\n\t}\n}\n\nvoid ABasketBallGamePlayerController::SetupInputComponent()\n{\n\tSuper::SetupInputComponent();\n\n\tif (UEnhancedInputComponent* EnhancedInput =\n\t\tCast<UEnhancedInputComponent>(InputComponent))\n\t{\n\t\tif (MoveAction)\n\t\t\tEnhancedInput->BindAction(MoveAction, ETriggerEvent::Triggered, this, &ABasketBallGamePlayerController::Move);\n\n\t\tif (LookAction)\n\t\t\tEnhancedInput->BindAction(LookAction, ETriggerEvent::Triggered, this, &ABasketBallGamePlayerController::Look);\n\n\t\tif (ShootAction)\n\t\t\tEnhancedInput->BindAction(ShootAction, ETriggerEvent::Started, this, &ABasketBallGamePlayerController::Shoot);\n\t}\n}\n\nvoid ABasketBallGamePlayerController::Move(const FInputActionValue& Value)\n{\n\tFVector2D Input = Value.Get<FVector2D>();\n\t\n\tif (APawn* ControlledPawn = GetPawn())\n\t{\n\t\tControlledPawn->AddMovementInput(GetControlRotation().Vector(), Input.Y);\n\t\tControlledPawn->AddMovementInput(\n\t\t\tFRotationMatrix(GetControlRotation()).GetScaledAxis(EAxis::Y),\n\t\t\tInput.X);\n\t}\n}\n\nvoid ABasketBallGamePlayerController::Look(const FInputActionValue& Value)\n{\n\tFVector2D Input = Value.Get<FVector2D>();\n\n\tAddYawInput(Input.X);\n\tAddPitchInput(Input.Y);\n}\n\nvoid ABasketBallGamePlayerController::Shoot(const FInputActionValue& Value)\n{\n\tUE_LOG(LogTemp, Warning, TEXT(\"Shoot Pressed\"));\n}\n\n//void ABasketBallGamePlayerController::UpdateHUD()\n//{\n//\tif (!ScoreHUD) return;\n//\n//\t// Option 1 (recommended)\n//\tUFunction* Func = ScoreHUD->FindFunction(FName(\"UpdateScoreDisplay\"));\n//\tif (Func)\n//\t{\n//\t\tScoreHUD->ProcessEvent(Func, nullptr);\n//\t}\n//\n//}\n"}