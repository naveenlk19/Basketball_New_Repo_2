{"file_path": "Source/BasketBallGame/Variant_Combat/Gameplay/CombatCheckpointVolume.cpp", "file_id": "Source_BasketBallGame_Variant_Combat_Gameplay_CombatCheckpointVolume_cpp", "asset_path": "", "doc_id": "qq-ac5f3de8-5361-40d2-8c6a-912322cb262b", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n\n#include \"CombatCheckpointVolume.h\"\n#include \"CombatCharacter.h\"\n#include \"CombatPlayerController.h\"\n\nACombatCheckpointVolume::ACombatCheckpointVolume()\n{\n\t// create the box volume\n\tRootComponent = Box = CreateDefaultSubobject<UBoxComponent>(TEXT(\"Box\"));\n\tcheck(Box);\n\n\t// set the box's extent\n\tBox->SetBoxExtent(FVector(500.0f, 500.0f, 500.0f));\n\n\t// set the default collision profile to overlap all dynamic\n\tBox->SetCollisionProfileName(FName(\"OverlapAllDynamic\"));\n\n\t// bind the begin overlap \n\tBox->OnComponentBeginOverlap.AddDynamic(this, &ACombatCheckpointVolume::OnOverlap);\n}\n\nvoid ACombatCheckpointVolume::OnOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult)\n{\n\t// ensure we use this only once\n\tif (bCheckpointUsed)\n\t{\n\t\treturn;\n\t}\n\t\t\n\t// has the player entered this volume?\n\tACombatCharacter* PlayerCharacter = Cast<ACombatCharacter>(OtherActor);\n\n\tif (PlayerCharacter)\n\t{\n\t\tif (ACombatPlayerController* PC = Cast<ACombatPlayerController>(PlayerCharacter->GetController()))\n\t\t{\n\t\t\t// raise the checkpoint used flag\n\t\t\tbCheckpointUsed = true;\n\n\t\t\t// update the player's respawn checkpoint\n\t\t\tPC->SetRespawnTransform(PlayerCharacter->GetActorTransform());\n\t\t}\n\n\t}\n}\n"}