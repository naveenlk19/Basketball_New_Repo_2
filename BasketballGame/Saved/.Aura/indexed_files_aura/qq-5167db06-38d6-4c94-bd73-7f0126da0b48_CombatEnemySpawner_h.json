{"file_path": "Source/BasketBallGame/Variant_Combat/AI/CombatEnemySpawner.h", "file_id": "Source_BasketBallGame_Variant_Combat_AI_CombatEnemySpawner_h", "asset_path": "", "doc_id": "qq-5167db06-38d6-4c94-bd73-7f0126da0b48", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n#pragma once\n\n#include \"CoreMinimal.h\"\n#include \"GameFramework/Actor.h\"\n#include \"CombatActivatable.h\"\n#include \"CombatEnemySpawner.generated.h\"\n\nclass UCapsuleComponent;\nclass UArrowComponent;\nclass ACombatEnemy;\n\n/**\n *  A basic Actor in charge of spawning Enemy Characters and monitoring their deaths.\n *  Enemies will be spawned one by one, and the spawner will wait until the enemy dies before spawning a new one.\n *  The spawner can be remotely activated through the ICombatActivatable interface\n *  When the last spawned enemy dies, the spawner can also activate other ICombatActivatables\n */\nUCLASS(abstract)\nclass ACombatEnemySpawner : public AActor, public ICombatActivatable\n{\n\tGENERATED_BODY()\n\t\n\tUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category=\"Components\", meta = (AllowPrivateAccess = \"true\"))\n\tUCapsuleComponent* SpawnCapsule;\n\n\tUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = \"Components\", meta = (AllowPrivateAccess = \"true\"))\n\tUArrowComponent* SpawnDirection;\n\nprotected:\n\n\t/** Type of enemy to spawn */\n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category=\"Enemy Spawner\")\n\tTSubclassOf<ACombatEnemy> EnemyClass;\n\n\t/** If true, the first enemy will be spawned as soon as the game starts */\n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category=\"Enemy Spawner\")\n\tbool bShouldSpawnEnemiesImmediately = true;\n\n\t/** Time to wait before spawning the first enemy on game start */\n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category=\"Enemy Spawner\", meta = (ClampMin = 0, ClampMax = 10))\n\tfloat InitialSpawnDelay = 5.0f;\n\n\t/** Number of enemies to spawn */\n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category=\"Enemy Spawner\", meta = (ClampMin = 0, ClampMax = 100))\n\tint32 SpawnCount = 1;\n\n\t/** Time to wait before spawning the next enemy after the current one dies */\n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category=\"Enemy Spawner\", meta = (ClampMin = 0, ClampMax = 10))\n\tfloat RespawnDelay = 5.0f;\n\n\t/** Time to wait after this spawner is depleted before activating the actor list */\n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category=\"Activation\", meta = (ClampMin = 0, ClampMax = 10))\n\tfloat ActivationDelay = 1.0f;\n\n\t/** List of actors to activate after the last enemy dies */\n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category=\"Activation\")\n\tTArray<AActor*> ActorsToActivateWhenDepleted;\n\n\t/** Flag to ensure this is only activated once */\n\tbool bHasBeenActivated = false;\n\n\t/** Timer to spawn enemies after a delay */\n\tFTimerHandle SpawnTimer;\n\npublic:\t\n\t\n\t/** Constructor */\n\tACombatEnemySpawner();\n\npublic:\n\n\t/** Initialization */\n\tvirtual void BeginPlay() override;\n\n\t/** Cleanup */\n\tvirtual void EndPlay(EEndPlayReason::Type EndPlayReason) override;\n\nprotected:\n\n\t/** Spawn an enemy and subscribe to its death event */\n\tvoid SpawnEnemy();\n\n\t/** Called when the spawned enemy has died */\n\tUFUNCTION()\n\tvoid OnEnemyDied();\n\n\t/** Called after the last spawned enemy has died */\n\tvoid SpawnerDepleted();\n\npublic:\n\n\t// ~begin ICombatActivatable interface\n\n\t/** Toggles the Spawner */\n\tUFUNCTION(BlueprintCallable, Category=\"Activatable\")\n\tvirtual void ToggleInteraction(AActor* ActivationInstigator) override;\n\n\t/** Activates the Spawner */\n\tUFUNCTION(BlueprintCallable, Category=\"Activatable\")\n\tvirtual void ActivateInteraction(AActor* ActivationInstigator) override;\n\n\t/** Deactivates the Spawner */\n\tUFUNCTION(BlueprintCallable, Category=\"Activatable\")\n\tvirtual void DeactivateInteraction(AActor* ActivationInstigator) override;\n\n\t// ~end IActivatable interface\n};\n"}