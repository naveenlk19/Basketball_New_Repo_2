{"file_path": "Source/BasketBallGame/BasketBallGameState.cpp", "file_id": "Source_BasketBallGame_BasketBallGameState_cpp", "asset_path": "", "doc_id": "qq-e4b9e613-bc4a-4d37-886f-3c13d7f18410", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n#include \"BasketBallGameState.h\"\n#include \"Net/UnrealNetwork.h\"\n\nABasketBallGameState::ABasketBallGameState()\n{\n\t// Initialize state\n\tMatchTimeRemaining = 300; // 5 minutes default\n\tShotAttempts = 0;\n\tbMatchActive = false;\n\n\t// Enable replication\n\tbReplicates = true;\n}\n\nvoid ABasketBallGameState::GetLifetimeReplicatedProps(TArray<FLifetimeProperty>& OutLifetimeProps) const\n{\n\tSuper::GetLifetimeReplicatedProps(OutLifetimeProps);\n\n\t// Register replicated properties\n\tDOREPLIFETIME(ABasketBallGameState, MatchTimeRemaining);\n\tDOREPLIFETIME(ABasketBallGameState, ShotAttempts);\n\tDOREPLIFETIME(ABasketBallGameState, bMatchActive);\n}\n\nvoid ABasketBallGameState::OnRep_MatchTimeRemaining()\n{\n\t// Broadcast to UI when timer replicates to client\n\tOnMatchTimeChanged.Broadcast(MatchTimeRemaining);\n}\n\nvoid ABasketBallGameState::OnRep_ShotAttempts()\n{\n\t// Broadcast to UI when attempts replicate to client\n\tOnAttemptsChanged.Broadcast(ShotAttempts);\n}\n\nvoid ABasketBallGameState::SetMatchTimeRemaining(int32 NewTime)\n{\n\tif (HasAuthority())\n\t{\n\t\tMatchTimeRemaining = NewTime;\n\t\t// OnRep won't fire on server, so broadcast manually\n\t\tOnMatchTimeChanged.Broadcast(MatchTimeRemaining);\n\t}\n}\n\nvoid ABasketBallGameState::IncrementShotAttempts()\n{\n\tif (HasAuthority())\n\t{\n\t\tShotAttempts++;\n\t\t// OnRep won't fire on server, so broadcast manually\n\t\tOnAttemptsChanged.Broadcast(ShotAttempts);\n\t}\n}\n\nvoid ABasketBallGameState::SetMatchActive(bool bActive)\n{\n\tif (HasAuthority())\n\t{\n\t\tbMatchActive = bActive;\n\t}\n}"}