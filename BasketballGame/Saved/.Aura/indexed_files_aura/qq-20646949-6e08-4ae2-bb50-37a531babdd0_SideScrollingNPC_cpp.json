{"file_path": "Source/BasketBallGame/Variant_SideScrolling/AI/SideScrollingNPC.cpp", "file_id": "Source_BasketBallGame_Variant_SideScrolling_AI_SideScrollingNPC_cpp", "asset_path": "", "doc_id": "qq-20646949-6e08-4ae2-bb50-37a531babdd0", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n\n#include \"SideScrollingNPC.h\"\n#include \"GameFramework/CharacterMovementComponent.h\"\n#include \"TimerManager.h\"\n\nASideScrollingNPC::ASideScrollingNPC()\n{\n \tPrimaryActorTick.bCanEverTick = true;\n\n\tGetCharacterMovement()->MaxWalkSpeed = 150.0f;\n}\n\nvoid ASideScrollingNPC::EndPlay(EEndPlayReason::Type EndPlayReason)\n{\n\tSuper::EndPlay(EndPlayReason);\n\n\t// clear the deactivation timer\n\tGetWorld()->GetTimerManager().ClearTimer(DeactivationTimer);\n}\n\nvoid ASideScrollingNPC::Interaction(AActor* Interactor)\n{\n\t// ignore if this NPC has already been deactivated\n\tif (bDeactivated)\n\t{\n\t\treturn;\n\t}\n\n\t// reset the deactivation flag\n\tbDeactivated = true;\n\n\t// stop character movement immediately\n\tGetCharacterMovement()->StopMovementImmediately();\n\n\t// launch the NPC away from the interactor\n\tFVector LaunchVector = Interactor->GetActorForwardVector() * LaunchImpulse;\n\tLaunchVector.Y = 0.0f;\n\tLaunchVector.Z = LaunchVerticalImpulse;\n\n\tLaunchCharacter(LaunchVector, true, true);\n\n\t// set up a timer to schedule reactivation\n\tGetWorld()->GetTimerManager().SetTimer(DeactivationTimer, this, &ASideScrollingNPC::ResetDeactivation, DeactivationTime, false);\n}\n\nvoid ASideScrollingNPC::ResetDeactivation()\n{\n\t// reset the deactivation flag\n\tbDeactivated = false;\n}\n"}