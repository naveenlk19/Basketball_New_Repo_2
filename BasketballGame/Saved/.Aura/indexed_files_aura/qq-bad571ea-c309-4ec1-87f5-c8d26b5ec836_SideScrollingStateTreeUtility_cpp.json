{"file_path": "Source/BasketBallGame/Variant_SideScrolling/AI/SideScrollingStateTreeUtility.cpp", "file_id": "Source_BasketBallGame_Variant_SideScrolling_AI_SideScrollingStateTreeUtility_cpp", "asset_path": "", "doc_id": "qq-bad571ea-c309-4ec1-87f5-c8d26b5ec836", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n\n#include \"SideScrollingStateTreeUtility.h\"\n#include \"StateTreeExecutionContext.h\"\n#include \"StateTreeExecutionTypes.h\"\n#include \"AIController.h\"\n#include \"Kismet/GameplayStatics.h\"\n\nEStateTreeRunStatus FStateTreeGetPlayerTask::Tick(FStateTreeExecutionContext& Context, const float DeltaTime) const\n{\n\t// get the instance data\n\tFInstanceDataType& InstanceData = Context.GetInstanceData(*this);\n\n\t// set the player pawn as the target\n\tInstanceData.TargetPlayer = UGameplayStatics::GetPlayerPawn(InstanceData.Controller.Get(), 0);\n\n\t// are the NPC and target valid?\n\tif (IsValid(InstanceData.TargetPlayer) && IsValid(InstanceData.NPC))\n\t{\n\t\tInstanceData.bValidTarget = FVector::Distance(InstanceData.NPC->GetActorLocation(), InstanceData.TargetPlayer->GetActorLocation()) < InstanceData.RangeMax;\n\t}\n\n\treturn EStateTreeRunStatus::Running;\n}\n\n#if WITH_EDITOR\nFText FStateTreeGetPlayerTask::GetDescription(const FGuid& ID, FStateTreeDataView InstanceDataView, const IStateTreeBindingLookup& BindingLookup, EStateTreeNodeFormatting Formatting /*= EStateTreeNodeFormatting::Text*/) const\n{\n\treturn FText::FromString(\"<b>Get Player</b>\");\n}\n#endif // WITH_EDITOR"}