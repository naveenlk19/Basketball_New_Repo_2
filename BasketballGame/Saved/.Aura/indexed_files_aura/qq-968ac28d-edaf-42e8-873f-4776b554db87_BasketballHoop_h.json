{"file_path": "Source/BasketBallGame/BasketballHoop.h", "file_id": "Source_BasketBallGame_BasketballHoop_h", "asset_path": "", "doc_id": "qq-968ac28d-edaf-42e8-873f-4776b554db87", "referencers": [], "dependencies": [], "content": "// Copyright Epic Games, Inc. All Rights Reserved.\n\n#pragma once\n\n#include \"CoreMinimal.h\"\n#include \"GameFramework/Actor.h\"\n#include \"BasketballHoop.generated.h\"\n\nclass UStaticMeshComponent;\nclass UBoxComponent;\nclass ABasketBallGameGameMode;\nclass ABasketball;\n\nDECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnBasketballScored, int32, Points);\n\n/**\n * Basketball Hoop Actor\n * Detects when basketball passes through rim and triggers scoring\n * Structured for multiplayer replication\n */\nUCLASS()\nclass BASKETBALLGAME_API ABasketballHoop : public AActor\n{\n\tGENERATED_BODY()\n\t\npublic:\t\n\t/** Constructor - properly instantiates all components */\n\tABasketballHoop();\n\n\t/** Called when the game starts */\n\tvirtual void BeginPlay() override;\n\n\t/** Root scene component for positioning */\n\tUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = \"Components\")\n\tUSceneComponent* HoopRoot;\n\n\t/** Backboard mesh */\n\tUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = \"Components\")\n\tUStaticMeshComponent* Backboard;\n\n\t/** Rim mesh */\n\tUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = \"Components\")\n\tUStaticMeshComponent* Rim;\n\n\t/** Top trigger - ball must pass through this first (entering hoop) */\n\tUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = \"Components\")\n\tUBoxComponent* TopTrigger;\n\n\t/** Bottom trigger - ball must pass through this second (exiting hoop) */\n\tUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = \"Components\")\n\tUBoxComponent* BottomTrigger;\n\n\t/** Points awarded for a successful shot */\n\tUPROPERTY(EditAnywhere, BlueprintReadWrite, Category = \"Scoring\")\n\tint32 PointValue;\n\n\t/** Height of hoop from ground (standard is 305cm / 10 feet) */\n\tUPROPERTY(EditAnywhere, BlueprintReadWrite, Category = \"Hoop Settings\")\n\tfloat HoopHeight;\n\n\t/** Delegate called when basketball scores */\n\tUPROPERTY(BlueprintAssignable, Category = \"Events\")\n\tFOnBasketballScored OnScored;\n\n\t/** Was the last shot a make or miss? */\n\tUPROPERTY(BlueprintReadOnly, Category = \"Scoring\")\n\tbool bLastShotWasMake;\n\n\t/** Total makes in this session */\n\tUPROPERTY(BlueprintReadOnly, Category = \"Scoring\")\n\tint32 TotalMakes;\n\n\t/** Total attempts in this session */\n\tUPROPERTY(BlueprintReadOnly, Category = \"Scoring\")\n\tint32 TotalAttempts;\n\n\tFORCEINLINE float GetHoopHeight() const { return HoopHeight; }\n\nprotected:\n\t/** Called when ball enters top trigger */\n\tUFUNCTION()\n\tvoid OnTopTriggerBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, \n\t\tUPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult);\n\n\t/** Called when ball enters bottom trigger */\n\tUFUNCTION()\n\tvoid OnBottomTriggerBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, \n\t\tUPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult);\n\n\t/** Track which basketballs have entered top trigger */\n\tTSet<ABasketball*> BallsInTopTrigger;\n\n\t/** Cached game mode reference */\n\tABasketBallGameGameMode* CachedGameMode;\n\n\t/** Register score with GameMode (central authority) */\n\tvoid RegisterScoreWithGameMode(ABasketball* Ball);\n\nprotected:\n\t/** Award points for successful shot */\n\tvoid AwardPoints(ABasketball* Ball);\n\n\t/** Visual feedback for made shot */\n\tUFUNCTION(BlueprintImplementableEvent, Category = \"Feedback\")\n\tvoid OnShotMade();\n\n\t/** Visual feedback for missed shot */\n\tUFUNCTION(BlueprintImplementableEvent, Category = \"Feedback\")\n\tvoid OnShotMissed();\n};\n"}